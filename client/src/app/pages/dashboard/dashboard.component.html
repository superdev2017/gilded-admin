<main>
  <ngx-loading-bar [color]="'#ffa600'"></ngx-loading-bar>
  <section class="mb-4">
    <div class="container-fluid content-padding">

      <!-- 1st row -->
      <div class="d-flex flex-row">
          <!-- shop -->
          <div class="col-6 mt-4 mb-4 widget shop">
            <div class="card-title">
              <h3>Shop</h3>
            </div>
            <div class="card">
              <div class="card-body d-flex flex-column align-items-center">
                <span class="img"></span>
                <div class="d-flex flex-row align-items-center">
                  <div class="search">
                      <span class="fa fa-search"></span>
                      <input type="text" class="form-control search-input" placeholder="Search" [(ngModel)]="searchValue"/>
                  </div>
                  <div>
                      <button type="button" class="btn btn-rounded btn-grey ml-auto search-btn" (click)="goToShop()">Search</button>
                  </div>
                </div>
                <p>Pay with crypto on over <b>50,000</b> products</p>
              </div>
            </div>
          </div>

          <!-- invoice -->
          <div class="col-6 mt-4 mb-4 widget invoice">
            <div class="card-title">
              <h3>Invoice</h3>
            </div>
            <div class="card">
              <div class="card-body d-flex flex-column align-items-center">
                <span class="img"></span>
                <h4>Get paid in cryptocurrency</h4>
                <button type="button" class="btn btn-rounded btn-grey">Create An Invoice <i class="fa fa-chevron-right ml-1"></i></button>
              </div>
            </div>
          </div>        
      </div>      

      <!-- 2nd row -->
      <div class="d-flex flex-row">
          <!-- spend -->
          <div class="col-6 mt-4 mb-4 widget spend">
            <div class="card-title">
              <h3>Spend</h3>
            </div>
            <div class="card">
              <div class="card-body d-flex flex-column align-items-center">
                <div class="d-flex flex-row align-items-center mb-3">
                  <span class="location-label"><b>Your location</b></span>                  
                  <div class="search">
                      <span class="fa fa-search search-location" (click)="searchLocation()"></span>
                      <input type="text" class="form-control search-input" (keyup)="searchLocation()" [(ngModel)]="searchLocationValue" [placeholder]="currentLocationPlaceholder"/>
                  </div>                                  
                  <span class="fa fa-map-marker ml-auto"></span>
                </div>
                <div class="locations" *ngIf="locations | async; let locations; else noLocations">
                  <div class="row location-item" *ngFor="let location of locations">
                    <div class="col-2">
                      <img class="location-image" src="https://picsum.photos/80" alt="">
                    </div>
                    <div class="col-6">
                      <div class="row">
                        <div class="col">
                          <span class="business-name">
                              {{location.name}}
                          </span>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col">
                          <span class="address">
                              {{ location?.houseno + ' ' + location?.street + ' ' + location?.city + ' ' + loc?.country + ' ' + loc?.postcode }}
                          </span>
                        </div>
                      </div>
                    </div>
                    <div class="col-4">
                        <div class="row">
                            <div class="col d-flex flex-column">
                              <span class="mobile">{{location.phone}}</span>
                              <span class="web">{{location.website}}</span>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col">
                              <a class="d-flex flex-row" target="_blank" [href]="'https://www.google.com/maps/?q='+ location.lat + ',' + location.lon">
                              <span class="fa fa-map-marker"></span>
                                <span class="map-link">View Map</span>
                              </a>
                            </div>
                          </div>
                    </div>
                  </div>
                </div>
                <ng-template class="row" #noLocations>
                  Loading near locations...
                </ng-template>
                <p class="mt-3">Location data provided by coinmap.org</p>
              </div>
            </div>
          </div>
          <!-- learn -->
          <div class="col-6 mt-4 mb-4 widget learn">
            <div class="card-title">
              <h3>Learn</h3>
            </div>
            <div class="card">
              <div class="card-body d-flex flex-column">
                <div class="blog">
                  <div class="row blog-item" *ngFor="let article of articles;">
                    <div class="col-3">
                      <img class="blog-image" src="https://picsum.photos/80" alt="">
                    </div>
                    <div class="col-9 d-flex align-items-center">
                      <span class="article-name">Blog article description</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>        
      </div>      

    </div>
  </section>
</main>